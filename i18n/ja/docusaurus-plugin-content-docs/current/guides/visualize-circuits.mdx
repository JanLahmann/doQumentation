---
title: "回路を可視化する"
sidebar_label: "回路を可視化する"
description: "Qiskit可視化モジュールを使用して回路の可視化を作成し、ジョブデータをプロットする"
notebook_path: "docs/guides/visualize-circuits.ipynb"
---
{/* doqumentation-source-hash: 1353d06a */}

<OpenInLabBanner notebookPath="docs/guides/visualize-circuits.ipynb" />



{/* cspell:ignore qcircuit mactex, backgroundcolor, lightgreen */}
{/*
  DO NOT EDIT THIS CELL!!!
  This cell's content is generated automatically by a script. Anything you add
  here will be removed next time the notebook is run. To add new content, create
  a new cell before or after this one.
*/}

<details>
<summary><b>パッケージバージョン</b></summary>

このページのコードは、以下の要件を使用して開発されました。
これらのバージョンまたはそれ以降のバージョンの使用を推奨します。

```
qiskit[all]~=2.3.0
```
</details>
作成している回路を確認することは多くの場合有用です。Qiskit回路を表示するには、次のオプションを使用します。

```python
from qiskit import QuantumCircuit
```

## 量子回路を描画する {#draw-a-quantum-circuit}

`QuantumCircuit`クラスは、`draw()`メソッドを使用した回路の描画、または回路オブジェクトの印刷をサポートしています。デフォルトでは、どちらも回路図のASCIIアート版をレンダリングします。

`print`は`None`を返しますが、図を印刷する副作用があることに注意してください。一方、`QuantumCircuit.draw`は副作用なしで図を返します。Jupyterノートブックは各セルの最後の行の出力を表示するため、同じ効果があるように見えます。

```python
# 量子回路を構築
circuit = QuantumCircuit(3, 3)
circuit.x(1)
circuit.h(range(3))
circuit.cx(0, 1)
circuit.measure(range(3), range(3));
```

```python
print(circuit)
```

```text
┌───┐          ┌─┐
q_0: ┤ H ├───────■──┤M├───
     ├───┤┌───┐┌─┴─┐└╥┘┌─┐
q_1: ┤ X ├┤ H ├┤ X ├─╫─┤M├
     ├───┤└┬─┬┘└───┘ ║ └╥┘
q_2: ┤ H ├─┤M├───────╫──╫─
     └───┘ └╥┘       ║  ║
c: 3/═══════╩════════╩══╩═
            2        0  1
```

```python
circuit.draw()
```

```text
┌───┐          ┌─┐
q_0: ┤ H ├───────■──┤M├───
     ├───┤┌───┐┌─┴─┐└╥┘┌─┐
q_1: ┤ X ├┤ H ├┤ X ├─╫─┤M├
     ├───┤└┬─┬┘└───┘ ║ └╥┘
q_2: ┤ H ├─┤M├───────╫──╫─
     └───┘ └╥┘       ║  ║
c: 3/═══════╩════════╩══╩═
            2        0  1
```

### 代替レンダラー {#alternative-renderers}

テキスト出力は、開発中に出力を素早く確認するのに便利ですが、最も柔軟性があるわけではありません。量子回路には2つの代替出力レンダラーがあります。1つは[Matplotlib](https://matplotlib.org/)を使用し、もう1つは[LaTeX](https://www.latex-project.org/)を使用します。LaTeXレンダラーには[qcircuitパッケージ](https://github.com/CQuIC/qcircuit)が必要です。「output」引数を文字列`mpl`と`latex`に設定することで、これらのレンダラーを選択します。

<Admonition type="tip">
  OSXユーザーは、[mactexパッケージ](https://www.tug.org/mactex/)を通じて必要なLaTeXパッケージを入手できます。
</Admonition>

```python
# Matplotlib描画
circuit.draw(output="mpl")
```

![Output of the previous code cell](/docs/images/guides/visualize-circuits/extracted-outputs/3f9c61c9-58f9-4315-a639-455fa2e58450-0.svg)

```python
# Latex描画
circuit.draw(output="latex")
```

![Output of the previous code cell](/docs/images/guides/visualize-circuits/extracted-outputs/94948dab-57de-45f0-8dd7-5901ae69b70a-0.avif)

### 出力を保存する {#save-output}

Jupyterノートブックで大規模な回路をインラインで描画すると、遅くなったり、読みにくくなったりする可能性があります。
図を直接ファイルに保存し、画像ビューアーで開いて必要に応じてズームインできます。

```python
# Matplotlibドロワーを使用して画像として保存
circuit.draw(output="mpl", filename="circuit-mpl.jpeg")
```

![Output of the previous code cell](/docs/images/guides/visualize-circuits/extracted-outputs/17889caf-d953-4661-9188-00505c17064e-0.svg)

```python
# またはLaTeXレンダリングを保存
circuit.draw(output="latex", filename="circuit-latex.pdf")
```

![Output of the previous code cell](/docs/images/guides/visualize-circuits/extracted-outputs/a36d1aa9-fa0d-4e27-ac83-5deee43a20dd-0.avif)

### 回路描画を制御する {#control-circuit-drawings}

デフォルトでは、`draw()`メソッドはレンダリングされた画像をオブジェクトとして返し、何も出力しません。返される正確なクラスは、指定された出力によって異なります: `'text'`(デフォルト)は`TextDrawer`オブジェクトを返し、`'mpl'`は`matplotlib.Figure`オブジェクトを返し、`latex`は`PIL.Image`オブジェクトを返します。Jupyterノートブックはこれらの戻り値の型を理解し、適切にレンダリングしますが、Jupyter外で実行する場合、画像は自動的に表示されません。

`draw()`メソッドには、出力を表示または保存するオプションの引数があります。指定すると、`filename`引数は、レンダリングされた出力を保存するパスを取ります。あるいは、`mpl`または`latex`出力を使用している場合、`interactive`引数を使用して新しいウィンドウで画像を開くことができます(これは常にノートブック内から機能するとは限りません)。
### 出力をカスタマイズする {#customize-the-output}

出力に応じて、回路図をカスタマイズするオプションもあります。

#### プロットバリアを無効にし、ビット順序を逆にする {#disable-plot-barriers-and-reverse-bit-order}
最初の2つのオプションは、3つのバックエンドすべてで共有されています。これらにより、ビット順序とバリアを描画するかどうかの両方を設定できます。これらは、それぞれ`reverse_bits`引数と`plot_barriers`引数によって設定できます。次の例は、任意の出力レンダラーで機能します。簡潔にするために、ここでは`mpl`を使用しています。

```python
from qiskit import QuantumRegister, ClassicalRegister

# バリアとより多くのレジスターを持つ新しい回路を描画
q_a = QuantumRegister(3, name="a")
q_b = QuantumRegister(5, name="b")
c_a = ClassicalRegister(3)
c_b = ClassicalRegister(5)

circuit = QuantumCircuit(q_a, q_b, c_a, c_b)
circuit.x(q_a[1])
circuit.x(q_b[1])
circuit.x(q_b[2])
circuit.x(q_b[4])
circuit.barrier()
circuit.h(q_a)
circuit.barrier(q_a)
circuit.h(q_b)
circuit.cswap(q_b[0], q_b[1], q_b[2])
circuit.cswap(q_b[2], q_b[3], q_b[4])
circuit.cswap(q_b[3], q_b[4], q_b[0])
circuit.barrier(q_b)
circuit.measure(q_a, c_a)
circuit.measure(q_b, c_b);
```

```python
# 回路を描画
circuit.draw(output="mpl")
```

![Output of the previous code cell](/docs/images/guides/visualize-circuits/extracted-outputs/8e57cd43-8a48-469d-8f69-8e7c936d4a1e-0.svg)

```python
# 逆ビット順序で回路を描画
circuit.draw(output="mpl", reverse_bits=True)
```

![Output of the previous code cell](/docs/images/guides/visualize-circuits/extracted-outputs/8e7a251a-0a4f-43e0-8cf5-48493df7bad9-0.svg)

```python
# バリアなしで回路を描画
circuit.draw(output="mpl", plot_barriers=False)
```

![Output of the previous code cell](/docs/images/guides/visualize-circuits/extracted-outputs/b4a601ad-1c04-4b16-afbd-ac5a0ad42653-0.svg)

### レンダラー固有のカスタマイズ {#renderer-specific-customizations}

一部の利用可能なカスタマイズオプションは、レンダラーに固有です。

`fold`引数は、出力の最大幅を設定します。`text`レンダラーでは、これは、次の行に折り返される前の図の行の長さを設定します。`mpl`レンダラーを使用する場合、これは次の行に折り返される前の(視覚的な)レイヤーの数です。

`mpl`レンダラーには、色とアウトラインを変更する`style`引数があります。詳細については、[APIドキュメント](https://docs.quantum.ibm.com/api/qiskit/qiskit.circuit.QuantumCircuit#draw)を参照してください。

`scale`オプションは、`mpl`および`latex`レンダラーの出力をスケーリングします。

```python
circuit = QuantumCircuit(1)
for _ in range(10):
    circuit.h(0)
# 行の長さを40文字に制限
circuit.draw(output="text", fold=40)
```

```text
┌───┐┌───┐┌───┐┌───┐┌───┐┌───┐┌───┐»
q: ┤ H ├┤ H ├┤ H ├┤ H ├┤ H ├┤ H ├┤ H ├»
   └───┘└───┘└───┘└───┘└───┘└───┘└───┘»
«   ┌───┐┌───┐┌───┐
«q: ┤ H ├┤ H ├┤ H ├
«   └───┘└───┘└───┘
```

```python
# mplで背景色を変更

style = {"backgroundcolor": "lightgreen"}
circuit.draw(output="mpl", style=style)
```

![Output of the previous code cell](/docs/images/guides/visualize-circuits/extracted-outputs/decadf88-4866-45a0-9e2f-836c51491f9e-0.svg)

```python
# mpl出力を通常サイズの1/2にスケーリング
circuit.draw(output="mpl", scale=0.5)
```

![Output of the previous code cell](/docs/images/guides/visualize-circuits/extracted-outputs/ade9a653-3243-4ac9-bb0e-c8fb82f7a034-0.svg)

### スタンドアロン回路描画関数 {#standalone-circuit-drawing-function}

回路オブジェクトのメソッドではなく、独立した関数で回路を描画することを好むアプリケーションがある場合、`qiskit.visualization`の公開安定インターフェースの一部である`circuit_drawer()`関数を直接使用できます。この関数は、必須引数として回路オブジェクトを取る点を除いて、`circuit.draw()`メソッドと同じように動作します。

```python
from qiskit.visualization import circuit_drawer

circuit_drawer(circuit, output="mpl", plot_barriers=False)
```

![Output of the previous code cell](/docs/images/guides/visualize-circuits/extracted-outputs/256dd092-b2eb-47af-a025-0ecdf85c2d5a-0.svg)

## 次のステップ {#next-steps}

<Admonition type="tip" title="推奨事項">
  -  [Groverのアルゴリズム](/tutorials/grovers-algorithm)チュートリアルで回路可視化の例を参照してください。
  -  [IBM Quantum Composer](/guides/composer)を使用してシンプルな回路を可視化してください。
  -  [回路タイミングを可視化する](/guides/visualize-circuit-timing)
  -  [Qiskit可視化APIドキュメント](https://docs.quantum.ibm.com/api/qiskit/visualization)を確認してください。
</Admonition>
