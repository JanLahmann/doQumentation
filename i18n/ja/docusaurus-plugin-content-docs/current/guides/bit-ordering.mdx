---
title: "Qiskit SDKにおけるビット順序"
sidebar_label: "Qiskit SDKにおけるビット順序"
description: "Qiskit SDKの順序規則とその選択理由を学ぶ"
notebook_path: "docs/guides/bit-ordering.ipynb"
---
{/* doqumentation-source-hash: 054ae82b */}

<OpenInLabBanner notebookPath="docs/guides/bit-ordering.ipynb" />



{/* cspell:ignore leftrightarrow */}
{/*
  DO NOT EDIT THIS CELL!!!
  This cell's content is generated automatically by a script. Anything you add
  here will be removed next time the notebook is run. To add new content, create
  a new cell before or after this one.
*/}

<details>
<summary><b>パッケージバージョン</b></summary>

このページのコードは、以下の要件を使用して開発されました。
これらのバージョンまたはそれ以降のバージョンの使用を推奨します。

```
qiskit[all]~=2.3.0
```
</details>
$n$個のビット(または量子ビット)のセットがある場合、通常は各ビットに$0
\rightarrow n-1$のラベルを付けます。異なるソフトウェアやリソースは、コンピューターメモリと画面表示の両方でこれらのビットを順序付ける方法を選択する必要があります。

## Qiskitの規則 {#qiskit-conventions}

Qiskit SDKが異なるシナリオでビットを順序付ける方法は次のとおりです。

### 量子回路 {#quantum-circuits}

`QuantumCircuit`クラスは、その量子ビットをリスト(`QuantumCircuit.qubits`)に格納します。このリスト内の量子ビットのインデックスが、量子ビットのラベルを定義します。

```python
from qiskit import QuantumCircuit, QuantumRegister
from qiskit.circuit import Qubit

qc = QuantumCircuit(2)
qc.qubits[0]  # 量子ビット "0"

Qubit(QuantumRegister(2, "q"), 0)
```

```text
<Qubit register=(2, "q"), index=0>
```

### 回路図 {#circuit-diagrams}

回路図では、量子ビット$0$が最上部の量子ビットで、量子ビット$n-1$が最下部の量子ビットです。`QuantumCircuit.draw`の`reverse_bits`引数を使用してこれを変更できます([Qiskitでの順序の変更](#change-ordering-in-qiskit)を参照)。

```python
qc.x(1)
qc.draw()
```

```text
q_0: ─────
     ┌───┐
q_1: ┤ X ├
     └───┘
```

### 整数 {#integers}

ビットを数値として解釈する場合、ビット$0$が最下位ビットで、ビット$n-1$が最上位ビットです。これは、各ビットが値$2^\text{label}$(labelは`QuantumCircuit.qubits`内の量子ビットのインデックス)を持つため、コーディング時に便利です。たとえば、次の回路実行は、ビット$0$が`0`、ビット$1$が`1`で終了します。これは10進整数`2`として解釈されます(確率`1.0`で測定)。

```python
from qiskit.primitives import StatevectorSampler as Sampler

qc.measure_all()

job = Sampler().run([qc])
result = job.result()
print(f" > Counts: {result[0].data.meas.get_counts()}")
```

```text
> Counts: {'10': 1024}
```

### 文字列 {#strings}

ビット(または量子ビット)のリストを文字列として表示または解釈する場合、ビット$n-1$が左端のビットで、ビット$0$が右端のビットです。これは、通常、最上位桁を左側に書く数値の表記法に従っており、Qiskitでは、ビット$n-1$が最上位ビットとして解釈されるためです。

たとえば、次のセルは、1量子ビット状態の文字列から`Statevector`を定義します。この場合、量子ビット$0$は状態$|+\rangle$にあり、量子ビット$1$は状態$|0\rangle$にあります。

```python
from qiskit.quantum_info import Statevector

sv = Statevector.from_label("0+")
sv.probabilities_dict()
```

```text
{np.str_('00'): np.float64(0.4999999999999999),
 np.str_('01'): np.float64(0.4999999999999999)}
```

これは、ビット文字列を解釈する際に時々混乱を引き起こします。左端のビットがビット$0$であると期待するかもしれませんが、通常はビット$n-1$を表します。

### 状態ベクトル行列 {#statevector-matrices}

状態ベクトルを複素数(振幅)のリストとして表現する場合、Qiskitはこれらの振幅を、インデックス$x$の振幅が計算基底状態$|x\rangle$を表すように順序付けます。

```python
print(sv[1])  # 状態 |01> の振幅
print(sv[2])  # 状態 |10> の振幅
```

```text
(0.7071067811865475+0j)
0j
```

### ゲート {#gates}

Qiskitの各ゲートは、独自の方法で量子ビットのリストを解釈できますが、制御ゲートは通常`(control, target)`の規則に従います。

たとえば、次のセルは、量子ビット$0$が制御で、量子ビット$1$がターゲットである制御Xゲートを追加します。

```python
from qiskit import QuantumCircuit

qc = QuantumCircuit(2)
qc.cx(0, 1)
qc.draw()
```

```text
q_0: ──■──
     ┌─┴─┐
q_1: ┤ X ├
     └───┘
```

Qiskitで前述したすべての規則に従うと、このCXゲートは変換$|01\rangle \leftrightarrow |11\rangle$を実行するため、次の行列を持ちます。

$$
\begin{pmatrix}
 1 & 0 & 0 & 0 \\
 0 & 0 & 0 & 1 \\
 0 & 0 & 1 & 0 \\
 0 & 1 & 0 & 0 \\
\end{pmatrix}
$$

## Qiskitでの順序の変更 {#change-ordering-in-qiskit}

量子ビットを逆順(つまり、量子ビット$0$が下部)で回路を描画するには、`reverse_bits`引数を使用します。これは生成される図にのみ影響し、回路には影響しません。Xゲートは依然として量子ビット$0$に作用します。

```python
from qiskit import QuantumCircuit

qc = QuantumCircuit(2)
qc.x(0)
qc.draw(reverse_bits=True)
```

```text
q_1: ─────
     ┌───┐
q_0: ┤ X ├
     └───┘
```

`reverse_bits`メソッドを使用して、量子ビットのラベルが逆転した新しい回路を返すことができます(これは元の回路を変更しません)。

```python
qc.reverse_bits().draw()
```

```text
q_0: ─────
     ┌───┐
q_1: ┤ X ├
     └───┘
```

この新しい回路では、Xゲートが量子ビット$1$に作用することに注意してください。

## 次のステップ {#next-steps}

<Admonition type="tip" title="推奨事項">
  -  [Groverのアルゴリズム](/tutorials/grovers-algorithm)チュートリアルで回路の使用例を参照してください。
  -  [QuantumCircuit API](https://docs.quantum.ibm.com/api/qiskit/qiskit.circuit.QuantumCircuit#quantumcircuit-class)リファレンスを探索してください。
</Admonition>
