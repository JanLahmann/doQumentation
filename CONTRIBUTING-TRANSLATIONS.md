# Contributing Translations

doQumentation is an open-source website for IBM Quantum's Qiskit tutorials and learning content. We translate the English pages into multiple languages. Translations go through a **draft → validate → promote** pipeline: you write to `translation/drafts/`, we validate and fix, then promote passing files to `i18n/`.

You can translate using any tool or LLM you prefer (Claude, Gemini, ChatGPT, manual, etc.).

---

## Setup

You'll work directly in our branch. We'll give you access — no need to fork or clone separately.

The English source files live in `docs/`. This folder is gitignored and generated by running:

```bash
python3 scripts/sync-content.py
```

If `docs/` is empty or missing, run the command above. Otherwise you're ready to go.

---

## Translation Status

All locales have complete tutorial coverage (44/44). **Guides are the biggest gap.** Translate in this order: **Guides → Courses → Modules**.

<!-- translation-status-start -->
| Locale | Code | Tutorials | Guides | Courses | Modules | Total |
|--------|------|-----------|--------|---------|---------|-------|
| German | `de` | 18/44 | 57/172 | 3/154 | 2/15 | 81/387 |
| Spanish | `es` | 44/44 | 26/172 | 3/154 | 2/15 | 76/387 |
| Ukrainian | `uk` | 44/44 | 6/172 | 3/154 | 2/15 | 56/387 |
| Japanese | `ja` | 44/44 | 6/172 | 3/154 | 2/15 | 56/387 |
| French | `fr` | 44/44 | 1/172 | 1/154 | 1/15 | 48/387 |
| Italian | `it` | 44/44 | 1/172 | 1/154 | 1/15 | 48/387 |
| Portuguese | `pt` | 44/44 | 1/172 | 1/154 | 1/15 | 48/387 |
| Tagalog | `tl` | 44/44 | 1/172 | 1/154 | 1/15 | 48/387 |
| Arabic | `ar` | 44/44 | 0/172 | 0/154 | 0/15 | 44/387 |
| Hebrew | `he` | 44/44 | 1/172 | 1/154 | 0/15 | 47/387 |
| Swabian | `swg` | 14/44 | 1/172 | 13/154 | 2/15 | 31/387 |
| Badisch | `bad` | 14/44 | 1/172 | 13/154 | 2/15 | 31/387 |
| Bavarian | `bar` | 14/44 | 1/172 | 13/154 | 2/15 | 31/387 |
| Kölsch | `ksh` | 29/44 | 1/172 | 13/154 | 2/15 | 46/387 |
| Low German | `nds` | 26/44 | 1/172 | 13/154 | 2/15 | 43/387 |
| Swiss German | `gsw` | 25/44 | 1/172 | 13/154 | 2/15 | 42/387 |
| Saxon | `sax` | 22/44 | 1/172 | 13/154 | 2/15 | 39/387 |
| Berlinerisch | `bln` | 19/44 | 1/172 | 13/154 | 2/15 | 36/387 |
| Austrian | `aut` | 17/44 | 1/172 | 13/154 | 2/15 | 34/387 |
<!-- translation-status-end -->

---

## How to Translate a File

### 1. Pick a file

Choose an English source file from `docs/`. Example: `docs/guides/bit-ordering.mdx`.

Check if it's already translated:
- If `translation/drafts/{LOCALE}/guides/bit-ordering.mdx` exists → draft in progress, **skip it**
- If `i18n/{LOCALE}/docusaurus-plugin-content-docs/current/guides/bit-ordering.mdx` exists and does NOT contain `{/* doqumentation-untranslated-fallback */}` → already translated, **skip it**
- If the i18n file contains the fallback marker or doesn't exist → **translate it**

### 2. Translate

Read the English source and write your translation to the **drafts** directory:

```
Source:  docs/{path}
Target:  translation/drafts/{LOCALE}/{path}
```

#### Rules

**Preserve unchanged** (do not translate):
- All code blocks (` ```python `, ` ```bash `, ` ```text `, etc.)
- All math/LaTeX (`$...$`, `$$...$$`)
- All JSX/HTML tag names and structural attributes (`<Admonition>`, `<Tabs>`, `<OpenInLabBanner>`, etc.)
- All URLs, links, and image paths
- All inline code in backticks (`` `Statevector` ``, `` `QuantumCircuit` ``, `` `numpy` ``)
- All frontmatter keys — only translate the **values** of `title`, `description`, and `sidebar_label`
- Standard quantum computing terms: Qubit, Gate, Circuit, Backend, Transpiler, Sampler, Estimator

**Translate:**
- Prose paragraphs, headings, list items, admonition text content
- Frontmatter values: `title`, `description`, `sidebar_label`
- Display text inside HTML/JSX attributes: `title="..."` on `<Admonition>`, `<summary>` text inside `<details>`, etc.
- Text inside HTML blocks (`<details>`, `<summary>`, `<b>`, etc.) — these contain prose even though they're inside tags

**Heading anchors** — this is important for internal links to keep working:

When you translate a heading, pin the original English anchor:

```markdown
## Change ordering in Qiskit              ← English original
## Reihenfolge in Qiskit ändern {#change-ordering-in-qiskit}   ← translated + pinned anchor
```

The `{#original-english-anchor}` syntax tells Docusaurus to use the English slug. Apply this to every heading (`##`, `###`, `####`) that differs from the English text.

**Formality** — use informal/familiar register:

| Locale | Form |
|--------|------|
| DE | informal ("du" not "Sie") |
| JA | polite (です/ます) but not overly formal |
| UK | informal ("ти" not "Ви") |
| ES | informal ("tú" not "usted") |
| FR | informal ("tu" not "vous") |
| IT | informal ("tu" not "Lei") |
| PT | informal ("você" casual) |
| TL | casual (no po/opo) |
| TH | casual (no ครับ/ค่ะ) |
| AR | informal register |
| HE | informal register |

**Quality:**
- Write natural, fluent prose — not word-for-word translation
- Use proper Unicode characters — never ASCII digraph substitutes (use ä ö ü ß, never ae oe ue ss)

### 3. Write the file

Write your translation to the drafts directory:
```
translation/drafts/{LOCALE}/{path}
```

Then commit and push. The maintainers will validate, fix heading anchors, and promote passing files to the live `i18n/` directory.

---

## Validation

Run validation after translating to catch issues before review. Two steps:

### Step 1: Automated structural checks (instant, free)

```bash
# Validate drafts
python translation/scripts/validate-translation.py --locale es --dir translation/drafts

# Single draft file
python translation/scripts/validate-translation.py --locale es --dir translation/drafts --file guides/bit-ordering.mdx

# Only guides section
python translation/scripts/validate-translation.py --locale es --dir translation/drafts --section guides

# Generate feedback report
python translation/scripts/validate-translation.py --locale es --dir translation/drafts --report

# Validate already-promoted translations (omit --dir)
python translation/scripts/validate-translation.py --locale es -v
```

This checks: line count, code blocks byte-identical, LaTeX counts, heading count + anchors, image paths, frontmatter, JSX tags, link URLs, and paragraph inflation (word salad detector).

Every check is **binary PASS/FAIL** — any structural deviation fails the file.

### Step 2: LLM linguistic review (optional but recommended)

Use a fast model (e.g., Claude Haiku, Gemini Flash) to check linguistic quality. The review prompt is in `translation/review-prompt.md` — paste it into your LLM with the English source and your translation.

This catches: register slips (tú vs usted), word salad / hallucination, verbosity, and accuracy drift.

### Common failures and fixes

| Failure | Cause | Fix |
|---------|-------|-----|
| Code blocks differ | Comments or placeholder variables translated inside code blocks | Revert code blocks to match English source exactly |
| Paragraph inflation >1.8x | Word salad — LLM degraded on long file | Retranslate the flagged section |
| Line count >5% delta | Content dropped or word salad expanded text | Compare section by section |
| Heading anchors missing | Forgot `{#english-anchor}` on translated headings | Run `python translation/scripts/fix-heading-anchors.py --locale XX --dir translation/drafts --apply` |

---

## Promoting Drafts

After validation passes, promote drafts to the live `i18n/` directory:

```bash
# Fix heading anchors in drafts
python translation/scripts/fix-heading-anchors.py --locale es --dir translation/drafts --apply

# Promote all passing drafts
python translation/scripts/promote-drafts.py --locale es

# Promote only guides
python translation/scripts/promote-drafts.py --locale es --section guides

# Promote a single file
python translation/scripts/promote-drafts.py --locale es --file guides/bit-ordering.mdx

# Force-promote (skip validation)
python translation/scripts/promote-drafts.py --locale es --force
```

Promotion copies PASS files from `translation/drafts/` to `i18n/`, deletes the draft, and updates `translation/status.json`. FAIL files stay in drafts for fixing.

---

## LLM Prompt Template

If you're using an LLM to help translate, here's a prompt you can adapt. Replace `{LANGUAGE}`, `{LOCALE}`, and `{path}` with your values:

```
You are a {LANGUAGE} translator for a Qiskit quantum computing tutorial website.

Translate this English MDX file to {LANGUAGE}:

Source file: docs/{path}
Write the translation to: translation/drafts/{LOCALE}/{path}

Rules:
- Preserve ALL code blocks, math/LaTeX, JSX/HTML tag names, imports, URLs, image paths, and inline code backticks — do not translate these
- Translate: prose paragraphs, headings, list items, admonition text content
- Also translate display text inside HTML/JSX attributes (e.g., title="..." on Admonition, text inside <summary>/<details>/<b> blocks)
- In frontmatter: translate only the values of title, description, sidebar_label — keep all keys and other values unchanged
- Heading anchors: when translating a heading, append {#original-english-anchor} to preserve internal links.
  Example: "## Install Qiskit" → "## Qiskit installieren {#install-qiskit}"
- Keep standard terms untranslated: Qubit, Gate, Circuit, Backend, Transpiler, Sampler, Estimator
- Use informal register (du/tú/tu/ти — not Sie/usted/vous/Ви)
- Write natural, fluent {LANGUAGE} — not word-for-word
- Use proper Unicode characters, never ASCII substitutes
```

---

## File Structure Reference

```
docs/                              ← English source (generated by sync-content.py)
├── index.mdx                      ← homepage
├── tutorials/*.mdx                ← 44 tutorials
├── guides/*.mdx                   ← 172 guides
└── learning/
    ├── courses/*/*.mdx            ← 154 course pages (13 courses)
    └── modules/*/*.mdx            ← 15 module pages

translation/
├── drafts/{LOCALE}/{path}         ← YOUR TRANSLATIONS GO HERE (flat structure)
├── status.json                    ← per-file tracking (draft → promoted)
├── translation-prompt.md          ← Claude Code automation prompt
├── review-prompt.md               ← LLM review prompt
└── scripts/                       ← validate, fix, promote scripts

i18n/{LOCALE}/                     ← promoted (live) translations
├── docusaurus-plugin-content-docs/
│   └── current/                   ← mirrors docs/ structure
│       ├── index.mdx
│       ├── tutorials/*.mdx
│       ├── guides/*.mdx
│       └── learning/
│           ├── courses/*/*.mdx
│           └── modules/*/*.mdx
├── code.json                      ← UI strings (buttons, labels)
├── docusaurus-theme-classic/
│   ├── navbar.json                ← navbar labels
│   └── footer.json                ← footer labels
└── docusaurus-plugin-content-docs/
    └── current.json               ← sidebar category labels
```

Contributors write to `translation/drafts/`. After validation, files are promoted to `i18n/` where Docusaurus reads them. The JSON UI string files are already translated for all locales.
